<Command>
    size_hint_y: None
    pos_hint: {"right": .98}
    height: self.texture_size[1]
    width: self.texture_size[0]
    padding: 12, 10
    theme_text_color: "Custom"
    text_color: 1, 1, 1, 1
    canvas.before:
        Color:
            rgb: (.003, .4, .6, 1)
        RoundedRectangle:
            size: self.width, self.height
            pos: self.pos
            radius: [23, 23, 0, 23]

<Response>
    size_hint_y: None
    pos_hint: {"x": .02}
    height: self.texture_size[1]
    width: self.texture_size[0]
    padding: 12, 10
    canvas.before:
        Color:
            rgb: (1, 1, 1, 1)
        RoundedRectangle:
            size: self.width, self.height
            pos: self.pos
            radius: [23, 23, 23, 0]


MDScreen:
    bot_name: bot_name
    text_input: text_input
    chat_list: chat_list
    name: "chatscreen"
    on_pre_leave:
        app.clear_chat()

    MDFloatLayout:

        Image: # Background image
            id: bg
            source: 'Assets/main_bg.png'
            allow_stretch: True
            keep_ratio: False
            size_hint: 1, 1

        MDFloatLayout:
            md_bg_color: .003, .4, .6, 1 #245/255, 245/255, 245/255, 1
            size_hint_y: .11
            pos_hint: {"center_y": .95}

            MDLabel:
                id: bot_name
                text: "Chat with Rami"
                pos_hint: {"center_x": .5, "center_y": .5}
                halign: "center"
                font_size: "30sp"
                font_name: "Poppins"
                theme_text_color: "Custom"
                text_color: 1,1,1,1

            #Back Button
            MDFlatButton:
                size: 125, 125
                pos_hint: {'center_x': 0.07, 'center_y': 0.5}

                on_press:
                    app.play_button_sound()
                    app.root.current = app.previous_screen
                Image:
                    source: 'Assets/back_button.png'

        ScrollView:
            size_hint_y: .77
            pos_hint: {"x": 0, "y": .116}
            do_scroll_x: False
            do_scroll_y: True

            BoxLayout:
                id: chat_list
                orientation: "vertical"
                size_hint: 1, None
                height: self.minimum_height
                cols: 1
                spacing: 5

        MDFloatLayout:
            id: text_bar_layout
            md_bg_color: 245/255, 245/255, 245/255, 1
            size_hint_y: .11
            pos_hint: {"center_y": .05}
            BoxLayout:
                id: text_input_layout
                orientation: "horizontal"
                size_hint: .8, .75
                pos_hint: {"center_x": .43, "center_y": .5}

                canvas:
                    Color:
                        rgba: 1, 1, 1, 1
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos

                        radius: [22, 22, 22, 22]

                TextInput:
                    id: text_input
                    hint_text: "Type your message here"
                    size_hint_y: 1, None
                    font_size: "27sp"
                    font_name: "Poppins"
                    height: self.minimum_height
                    multiline: False
                    cursor_color: .003, .4, .6, 1
                    cursor_width: "1.5sp"
                    foreground_color: .003, .4, .6, 1
                    background_color: 1, 1, 1, 0  # Set a white background color
                    padding: [15, 26] # [padding_left, padding_top, padding_right, padding_bottom]
                    halign: 'left'
                    valign: 'middle'
                    on_focus:
                        app.move_text_box()
                    on_text_validate:
                        app.send_message()

            MDIconButton:
                id: send_button
                pos_hint: {"center_x": .91, "center_y": .5}
                icon: "send"
                icon_size: "30sp"
                user_font_size: "24sp"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1
                md_bg_color: .003, .4, .6, 1
                on_release:
                    app.play_button_sound()
                    app.send_message()



